<%- include('partials/header'); -%>
<h1><%= title %></h1>

<form action="" method="post">
  <label for="title">Title: </label>
  <input
    type="text"
    name="title"
    id="title"
    placeholder="Name of book"
    value="<%= typeof book == 'undefined' ? '' : book.title %>"
  />
  <label for="author">Author: </label>
  <select name="author" id="author" placeholder="Select author">
    <% authors.forEach(function(author){ %> <% if (typeof book != 'undefined') {
    %>
    <option
      value=" <%= author._id %>"
      selected="<% author._id.toString() === book.author._id.toString() ? 'selected' : false %>"
    >
      <%= author.name %>
    </option>
    <% } else {%>
    <option value="<%= author._id %>"><%= author.name %></option>
    <% } %> <% }); %>
  </select>

  <label for="summary">Summary: </label>
  <textarea name="summary" id="summary" placeholder="Summary">
 <%= typeof book == 'undefined' ? '' : book.summary %></textarea
  >
  <label for="isbn">ISBN: </label>
  <input
    type="text"
    name="isbn"
    id="isbn"
    placeholder="ISBN13"
    value="<%= typeof book == 'undefined' ? '' : book.isbn %>"
  />

  <label>Genre </label>
  <% genres.forEach(function(genre){ %>
  <input
    type="checkbox"
    name="genre"
    id="genre._id"
    value="<%= genre._id %>"
    checked="<%= genre.checked %>"
  />
  <label for="<%= genre._id %>"><%= genre.name %></label>
  <% }) %>

  <button type="submit">Submit</button>
</form>

<% if (typeof errors != 'undefined') { %>
<ul>
  <% errors.forEach(function(error){ %>
  <li><%= error.msg %></li>
  <% }); %>
</ul>
<% } %>
